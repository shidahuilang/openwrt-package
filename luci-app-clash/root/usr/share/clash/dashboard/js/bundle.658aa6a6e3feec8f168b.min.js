!function(e){function t(t){for(var r,i,u=t[0],l=t[1],s=t[2],f=0,d=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(c&&c(t);d.length;)d.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var l=n[u];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window.webpackJsonp=window.webpackJsonp||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var c=l;a.push([52,1]),n()}([,,,,function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.partition=t.to=t.noop=t.removeLocalStorageItem=t.setLocalStorageItem=t.getLocalStorageItem=void 0,t.getLocalStorageItem=function(e,t){return void 0===t&&(t=""),window.localStorage.getItem(e)||t},t.setLocalStorageItem=function(e,t){return window.localStorage.setItem(e,t)},t.removeLocalStorageItem=function(e){return window.localStorage.removeItem(e)},t.noop=function(){},t.to=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e];case 1:return[2,[t.sent(),null]];case 2:return[2,[null,t.sent()]];case 3:return[2]}}))}))},t.partition=function(e,t){var n,r,o=[],i=[];try{for(var u,l=a(e),s=l.next();!s.done;s=l.next())t(u=s.value)?o.push(u):i.push(u)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return[o,i]}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"==n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(67),t),o(n(69),t),o(n(70),t),o(n(72),t),o(n(74),t),o(n(76),t),o(n(77),t),o(n(79),t),o(n(151),t),o(n(153),t),o(n(155),t),o(n(157),t),o(n(159),t),o(n(161),t),o(n(163),t),o(n(165),t),o(n(167),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"==n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(80),t)},,,function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionStreamReader=t.getLogsStreamReader=t.changeProxySelected=t.getConnections=t.closeConnection=t.closeAllConnections=t.getProxyDelay=t.getVersion=t.getProxy=t.getProxies=t.healthCheckProvider=t.updateRuleProvider=t.updateProvider=t.getRuleProviders=t.getProxyProviders=t.updateRules=t.getRules=t.updateConfig=t.getConfig=t.getInstance=t.getExternalControllerConfig=void 0;var u=i(n(130)),l=n(4),s=n(11),c=n(148),f=n(149);function d(){return r(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(o){switch(o.label){case 0:return s.isClashX()?[4,s.jsBridge.getAPIInfo()]:[3,2];case 1:return[2,{hostname:(e=o.sent()).host,port:e.port,secret:e.secret}];case 2:if(t=l.getLocalStorageItem("externalControllerAddr","127.0.0.1"),n=l.getLocalStorageItem("externalControllerPort","9090"),r=l.getLocalStorageItem("secret",""),!t||!n)throw new Error("can't get hostname or port");return[2,{hostname:t,port:n,secret:r}]}}))}))}function p(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().get("configs")]}}))}))}function h(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().get("version")]}}))}))}t.getExternalControllerConfig=d,t.getInstance=c.createAsyncSingleton((function(){return r(void 0,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(o){switch(o.label){case 0:return[4,d()];case 1:return e=o.sent(),t=e.hostname,n=e.port,r=e.secret,[2,u.default.create({baseURL:"//"+t+":"+n,headers:r?{Authorization:"Bearer "+r}:{}})]}}))}))})),t.getConfig=p,t.updateConfig=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.getInstance()];case 1:return[2,n.sent().patch("configs",e)]}}))}))},t.getRules=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().get("rules")]}}))}))},t.updateRules=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().put("rules")]}}))}))},t.getProxyProviders=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().get("providers/proxies",{validateStatus:function(e){return 200<=e&&300>e||404===e}}).then((function(e){return 404===e.status&&(e.data={providers:{}}),e}))]}}))}))},t.getRuleProviders=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().get("providers/rules")]}}))}))},t.updateProvider=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.getInstance()];case 1:return[2,n.sent().put("providers/proxies/"+encodeURIComponent(e))]}}))}))},t.updateRuleProvider=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.getInstance()];case 1:return[2,n.sent().put("providers/rules/"+encodeURIComponent(e))]}}))}))},t.healthCheckProvider=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.getInstance()];case 1:return[2,n.sent().get("providers/proxies/"+encodeURIComponent(e)+"/healthcheck")]}}))}))},t.getProxies=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().get("proxies")]}}))}))},t.getProxy=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.getInstance()];case 1:return[2,n.sent().get("proxies/"+encodeURIComponent(e))]}}))}))},t.getVersion=h,t.getProxyDelay=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.getInstance()];case 1:return[2,n.sent().get("proxies/"+encodeURIComponent(e)+"/delay",{params:{timeout:5e3,url:"http://www.gstatic.com/generate_204"}})]}}))}))},t.closeAllConnections=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().delete("connections")]}}))}))},t.closeConnection=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,t.getInstance()];case 1:return[2,n.sent().delete("connections/"+e)]}}))}))},t.getConnections=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,t.getInstance()];case 1:return[2,e.sent().get("connections")]}}))}))},t.changeProxySelected=function(e,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,t.getInstance()];case 1:return[2,r.sent().put("proxies/"+encodeURIComponent(e),{name:n})]}}))}))},t.getLogsStreamReader=c.createAsyncSingleton((function(){return r(this,void 0,void 0,(function(){var e,t,n,r,i,u,s,c;return o(this,(function(o){switch(o.label){case 0:return[4,d()];case 1:return e=o.sent(),[4,p()];case 2:return t=o.sent().data,[4,l.to(h())];case 3:return n=a.apply(void 0,[o.sent(),2]),r=n[0],i=n[1],u=i?"unkonwn version":r.data.version,s=!!u||!0,c=location.protocol+"//"+e.hostname+":"+e.port+"/logs?level="+t["log-level"],[2,new f.StreamReader({url:c,bufferLength:200,token:e.secret,useWebsocket:s})]}}))}))})),t.getConnectionStreamReader=c.createAsyncSingleton((function(){return r(this,void 0,void 0,(function(){var e,t,n,r,i,u,s;return o(this,(function(o){switch(o.label){case 0:return[4,d()];case 1:return e=o.sent(),[4,l.to(h())];case 2:return t=a.apply(void 0,[o.sent(),2]),n=t[0],r=t[1],i=r?"unkonwn version":n.data.version,u=!!i||!0,s=location.protocol+"//"+e.hostname+":"+e.port+"/connections",[2,new f.StreamReader({url:s,bufferLength:200,token:e.secret,useWebsocket:u})]}}))}))}))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.useVisible=t.useRound=t.useInterval=t.useObject=void 0;var i=n(66),u=n(0),l=n(4);t.useObject=function(e){var t=o(i.useImmer(e),2),n=t[0],l=t[1];return[n,u.useCallback((function(e,t){"string"==typeof e?l((function(n){n[e]=t})):"function"==typeof e?l(e):"object"===r(e)&&l((function(t){var n,r,o=e;try{for(var i=a(Object.keys(o)),u=i.next();!u.done;u=i.next()){var l=u.value;t[l]=o[l]}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}))}),[l])]},t.useInterval=function(e,t){var n=u.useRef(l.noop);u.useEffect((function(){n.current=e}),[e]),u.useEffect((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t);return function(){return clearInterval(e)}}}),[t])},t.useRound=function(e,t){if(void 0===t&&(t=0),2>e.length)throw new Error("List requires at least two elements");var n=o(u.useState(t),2),r=n[0],a=n[1];return{current:u.useMemo((function(){return e[r]}),[r]),next:function(){a((r+1)%e.length)}}},t.useVisible=function(e){void 0===e&&(e=!1);var t=o(u.useState(e),2),n=t[0],r=t[1];return{visible:n,hide:function(){r(!1)},show:function(){r(!0)}}}},function(e,t,n){"use strict";function r(){return"ClashX Runtime"===navigator.userAgent}Object.defineProperty(t,"__esModule",{value:!0}),t.setupJsBridge=t.JsBridge=t.jsBridge=t.isClashX=void 0,t.isClashX=r,t.jsBridge=null;var o=function(){function e(e){var t=this;this.instance=null,window.WebViewJavascriptBridge&&(this.instance=window.WebViewJavascriptBridge,e(this.instance)),this.initBridge((function(n){t.instance=n,e(n)}))}return e.prototype.initBridge=function(e){if(!r())return null==e?void 0:e(null);if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="https://__bridge_loaded__",document.documentElement.appendChild(t),setTimeout((function(){return document.documentElement.removeChild(t)}),0)},e.prototype.callHandler=function(e,t){var n=this;return new Promise((function(r){var o;null===(o=n.instance)||void 0===o||o.callHandler(e,t,r)}))},e.prototype.ping=function(){return this.callHandler("ping")},e.prototype.readConfigString=function(){return this.callHandler("readConfigString")},e.prototype.getPasteboard=function(){return this.callHandler("getPasteboard")},e.prototype.getAPIInfo=function(){return this.callHandler("apiInfo")},e.prototype.setPasteboard=function(e){return this.callHandler("setPasteboard",e)},e.prototype.writeConfigWithString=function(e){return this.callHandler("writeConfigWithString",e)},e.prototype.setSystemProxy=function(e){return this.callHandler("setSystemProxy",e)},e.prototype.getStartAtLogin=function(){return this.callHandler("getStartAtLogin")},e.prototype.getProxyDelay=function(e){return this.callHandler("speedTest",e)},e.prototype.setStartAtLogin=function(e){return this.callHandler("setStartAtLogin",e)},e.prototype.isSystemProxySet=function(){return this.callHandler("isSystemProxySet")},e}();t.JsBridge=o,t.setupJsBridge=function(e){return t.jsBridge?e(t.jsBridge):void(t.jsBridge=new o(e))}},,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fromNow=void 0;var o=r(n(28)),a=r(n(176));n(177),o.default.extend(a.default),t.fromNow=function(e,t){var n="en_US"===t?"en":"zh-cn";return o.default().locale(n).from(e)}},,,,,,,,function(e,t,n){"use strict";var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.compareDesc=void 0;var l,s,c=i(n(0)),f=u(n(29)),d=u(n(36)),p=n(10),h=n(5),v=n(6),m=n(171);n(179),(s=l||(l={}))[s.None=0]="None",s[s.Asc=1]="Asc",s[s.Desc=2]="Desc";var y=((r={})[l.None]="sort",r[l.Asc]="sort-ascending",r[l.Desc]="sort-descending",r);function b(e,t){var n=Number.MAX_SAFE_INTEGER,r=e.history.length?e.history.slice(-1)[0].delay:0;return((t.history.length?t.history.slice(-1)[0].delay:0)||n)-(r||n)}function g(){var e=v.useProxy(),t=e.groups,n=e.global,r=v.useConfig(),o=r.data,a=r.set,i=v.useGeneral().general,u=(0,v.useI18n().useTranslation)("Proxies").t,l=c.useMemo((function(){return"global"===i.mode?[n]:t}),[i,t,n]);return c.default.createElement(c.default.Fragment,null,0!==l.length&&c.default.createElement("div",{className:"proxies-container"},c.default.createElement(h.Header,{title:u("groupTitle")},c.default.createElement(h.Checkbox,{className:"connections-filter",checked:o.breakConnections,onChange:function(e){return a("breakConnections",e)}},u("breakConnectionsText"))),c.default.createElement(h.Card,{className:"proxies-group-card"},c.default.createElement("ul",{className:"proxies-group-list"},l.map((function(e){return c.default.createElement("li",{className:"proxies-group-item",key:e.name},c.default.createElement(m.Group,{config:e}))}))))))}function _(){var e=v.useProxyProviders(),t=e.providers,n=e.update,r=(0,v.useI18n().useTranslation)("Proxies").t;return f.default("providers",n),c.default.createElement(c.default.Fragment,null,0!==t.length&&c.default.createElement("div",{className:"proxies-container"},c.default.createElement(h.Header,{title:r("providerTitle")}),c.default.createElement("ul",{className:"proxies-providers-list"},t.map((function(e){return c.default.createElement("li",{className:"proxies-providers-item",key:e.name},c.default.createElement(m.Provider,{provider:e}))})))))}function w(){var e=v.useProxy().proxies,t=v.useGeneral().update,n=(0,v.useI18n().useTranslation)("Proxies").t;f.default("general",t);var r=p.useRound([l.Asc,l.Desc,l.None]),o=r.current,a=r.next,i=c.useMemo((function(){return o===l.Desc?e.slice().sort((function(e,t){return b(e,t)})):o===l.Asc?e.slice().sort((function(e,t){return-1*b(e,t)})):e.slice()}),[o,e]);return c.default.createElement(c.default.Fragment,null,0!==i.length&&c.default.createElement("div",{className:"proxies-container"},c.default.createElement(h.Header,{title:n("title")},c.default.createElement(h.Icon,{className:"proxies-action-icon",type:y[o],onClick:a,size:20}),c.default.createElement(h.Icon,{className:"proxies-action-icon",type:"speed",size:20}),c.default.createElement("span",{className:"proxies-speed-test",onClick:function(){d.default.notifySpeedTest()}},n("speedTestText"))),c.default.createElement("ul",{className:"proxies-list"},i.map((function(e){return c.default.createElement("li",{key:e.name},c.default.createElement(m.Proxy,{config:e}))})))))}t.compareDesc=b,t.default=function(){var e=v.useProxy().update;return f.default("proxies",e),c.default.createElement("div",{className:"page"},c.default.createElement(g,null),c.default.createElement(_,null),c.default.createElement(w,null))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Action=void 0;var o,a=r(n(37));(o=t.Action||(t.Action={})).SPEED_NOTIFY="speed-notify";var i=function(){function e(){this.EE=new a.default}return e.prototype.notifySpeedTest=function(){this.EE.emit(o.SPEED_NOTIFY)},e.prototype.subscribe=function(e,t){this.EE.addListener(e,t)},e.prototype.unsubscribe=function(e,t){this.EE.removeListener(e,t)},e}();t.default=new i},,,,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Proxy=void 0;var c=a(n(0)),f=s(n(1)),d=n(6),p=n(9),h=a(n(36)),v=n(11),m=n(4);n(172);var y={"#909399":0,"#00c520":260,"#ff9a28":600,"#ff3e5e":1/0};function b(e){var t;return i(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return v.isClashX()?[4,null===v.jsBridge||void 0===v.jsBridge?void 0:v.jsBridge.getProxyDelay(e)]:[3,2];case 1:return[2,null!==(t=n.sent())&&void 0!==t?t:0];case 2:return[4,p.getProxyDelay(e)];case 3:return[2,n.sent().data.delay]}}))}))}t.Proxy=function(e){function t(){return i(this,void 0,void 0,(function(){var e,t,r,a;return u(this,(function(i){switch(i.label){case 0:return[4,m.to(b(n.name))];case 1:return e=l.apply(void 0,[i.sent(),2]),t=e[0],r=e[1],a=r?0:t,o((function(e){var t=e.proxies.find((function(e){return e.name===n.name}));t&&t.history.push({time:Date.now().toString(),delay:a})})),[2]}}))}))}var n=e.config,r=e.className,o=d.useProxy().set,a=c.useMemo((function(){var e;return(null===(e=n.history)||void 0===e?void 0:e.length)?n.history.slice(-1)[0].delay:0}),[n]);c.useLayoutEffect((function(){return h.default.subscribe(h.Action.SPEED_NOTIFY,t),function(){return h.default.unsubscribe(h.Action.SPEED_NOTIFY,t)}}),[]);var s=c.useMemo((function(){return 0===a}),[a]),p=c.useMemo((function(){return Object.keys(y).find((function(e){return a<=y[e]}))}),[a]),v=s?void 0:p;return c.default.createElement("div",{className:f.default("proxy-item",{"proxy-error":s},r)},c.default.createElement("span",{className:"proxy-type",style:{backgroundColor:v}},n.type),c.default.createElement("p",{className:"proxy-name"},n.name),c.default.createElement("p",{className:"proxy-delay"},0===a?"-":a+"ms"))}},,,,function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(53)),a=n(11);a.isClashX()?a.setupJsBridge(o.default):o.default()},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(n(0)),l=n(12),s=n(30),c=n(15),f=i(n(63));t.default=function(){var e=document.getElementById("root"),t=u.createElement(c.RecoilRoot,null,u.createElement(s.HashRouter,null,u.createElement(f.default,null)));l.render(t,e)}},,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(n(0)),l=n(30),s=n(64),c=i(n(1)),f=n(11);n(65);var d=i(n(35)),p=i(n(180)),h=i(n(182)),v=i(n(187)),m=i(n(197)),y=i(n(200)),b=i(n(211)),g=n(9);t.default=s.hot((function(){u.useEffect((function(){g.getLogsStreamReader()}),[]);var e=[{path:"/proxies",name:"Proxies",component:d.default},{path:"/logs",name:"Logs",component:p.default},{path:"/rules",name:"Rules",component:h.default,noMobile:!0},{path:"/connections",name:"Connections",component:y.default,noMobile:!0},{path:"/settings",name:"Settings",component:v.default}];return u.default.createElement("div",{className:c.default("app",{"not-clashx":!f.isClashX()})},u.default.createElement(m.default,{routes:e}),u.default.createElement("div",{className:"page-container"},u.default.createElement(l.Route,{exact:!0,path:"/",component:function(){return u.default.createElement(l.Redirect,{to:"/proxies"})}}),e.map((function(e){return u.default.createElement(l.Route,{exact:!1,path:e.path,key:e.path,component:e.component})}))),u.default.createElement(b.default,null))}))},,function(e,t,n){},,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var u=a(n(0)),l=i(n(1));n(68),t.Header=function(e){var t=e.title,n=e.children,r=e.className,o=e.style;return u.createElement("header",{className:l.default("header",r),style:o},u.createElement("h1",null,t),u.createElement("div",{className:"operations"},n))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var l=i(n(0)),s=u(n(1));t.Icon=function(e){var t=e.type,n=e.size,o=void 0===n?14:n,a=e.className,i=e.style,u=s.default("clash-iconfont","icon-"+t,a),c=r({fontSize:o},i),f=r(r({},e),{className:u,style:c});return l.createElement("i",r({},f))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Switch=void 0;var u=a(n(0)),l=n(5),s=n(4),c=i(n(1));n(71),t.Switch=function(e){var t=e.className,n=e.checked,r=void 0!==n&&n,o=e.disabled,a=void 0!==o&&o,i=e.onChange,f=void 0===i?s.noop:i,d=c.default("switch",{checked:r,disabled:a},t);return u.createElement("div",{className:d,onClick:function(){a||f(!r)}},u.createElement(l.Icon,{className:"switch-icon",type:"check",size:20,style:{fontWeight:"bold"}}))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0;var u=a(n(0)),l=i(n(1));n(73),t.Card=function(e){var t=e.className,n=e.style,r=e.children;return u.createElement("div",{className:l.default("card",t),style:n},r)}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Row=void 0;var u=a(n(0)),l=i(n(1));n(75),t.Row=function(e){var t=e.gutter,n=void 0===t?24:t,r=e.align,o=void 0===r?"top":r,a=e.justify,i=void 0===a?"start":a,s=e.className,c=e.style,f=e.children;return u.createElement("div",{className:l.default("row","row-gutter-"+n,"row-align-"+o,"row-justify-"+i,s),style:c},f)}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Col=void 0;var u=a(n(0)),l=i(n(1));t.Col=function(e){var t=e.offset,n=void 0===t?0:t,r=e.order,o=void 0===r?0:r,a=e.span,i=void 0===a?1:a,s=e.className,c=e.style,f=e.children,d=Object.assign({},{order:o},c);return u.createElement("div",{className:l.default("column","column-offset-"+n,"column-span-"+i,s),style:d},f)}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonSelect=void 0;var u=a(n(0)),l=i(n(1));n(78),t.ButtonSelect=function(e){var t=e.options,n=e.value,r=e.onSelect;return u.createElement("div",{className:"button-select"},t.map((function(e){return u.createElement("button",{value:e.value,key:e.value,className:l.default("button-select-options",{actived:n===e.value}),onClick:function(){return null==r?void 0:r(e.value)}},e.label)})))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tags=void 0;var l=a(n(0)),s=n(6),c=n(4),f=u(n(1));n(150),t.Tags=function(e){var t=e.className,n=e.data,r=e.onClick,o=e.select,a=e.canClick,u=e.errSet,d=e.rowHeight,p=(0,s.useI18n().useTranslation)("Proxies").t,h=i(l.useState(!1),2),v=h[0],m=h[1],y=i(l.useState(!1),2),b=y[0],g=y[1],_=l.useRef(null);l.useLayoutEffect((function(){var e,t;g(30<(null!==(t=null===(e=null==_?void 0:_.current)||void 0===e?void 0:e.offsetHeight)&&void 0!==t?t:0))}),[]);var w=v?"auto":d,P=a?r:c.noop,E=n.map((function(e){var t=f.default({"tags-selected":o===e,"can-click":a,error:null==u?void 0:u.has(e)});return l.default.createElement("li",{className:t,key:e,onClick:function(){return P(e)}},e)}));return l.default.createElement("div",{className:f.default("tags-container",t),style:{height:w}},l.default.createElement("ul",{ref:_,className:f.default("tags",{expand:v})},E),b&&l.default.createElement("span",{className:"tags-expand",onClick:function(){m(!v)}},p(v?"collapseText":"expandText")))}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},c=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},f=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useRule=t.rules=t.useAPIInfo=t.apiData=t.useClashXData=t.clashxData=t.proxyMapping=t.useProxy=t.proxies=t.useGeneral=t.general=t.useRuleProviders=t.ruleProvider=t.useProxyProviders=t.proxyProvider=t.useConfig=t.config=t.useVersion=t.version=t.useI18n=t.useIdentity=void 0;var p=n(15),h=d(n(81)),v=d(n(122)),m=n(0),y=n(126),b=n(129),g=i(n(9)),_=n(4),w=n(11),P=p.atom({key:"identity",default:!0});function E(){var e=s(p.useRecoilState(P),2),t=e[0],n=e[1];return{identity:t,wrapFetcher:function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return u(this,void 0,void 0,(function(){var r,o,a,i;return l(this,(function(u){switch(u.label){case 0:return[4,_.to(e.apply(void 0,c(t)))];case 1:if(r=s.apply(void 0,[u.sent(),2]),o=r[0],a=r[1],(i=a)&&(!i.response||401===i.response.status))throw n(!1),a;return n(!0),[2,o]}}))}))}},set:n}}t.useIdentity=E;var x=p.atom({key:"i18n",default:y.getLanguage()});t.useI18n=function(){var e=s(p.useRecoilState(x),2),t=e[0],n=e[1],r=m.useCallback((function(e){return{t:function(n){return h.default(y.Language[t][e],n)}}}),[t]);return{lang:t,locales:y.locales,setLang:function(e){n(e),y.setLanguage(e)},useTranslation:r}},t.version=p.atom({key:"version",default:{version:"",premium:!1}}),t.useVersion=function(){var e=s(p.useRecoilState(t.version),2),n=e[0],r=e[1],o=E().set;return{version:n.version,premium:n.premium,update:function(){return u(this,void 0,void 0,(function(){var e,t,n;return l(this,(function(a){switch(a.label){case 0:return[4,_.to(g.getVersion())];case 1:return e=s.apply(void 0,[a.sent(),2]),t=e[0],n=e[1],o(!n),r(n?{version:"",premium:!1}:{version:t.data.version,premium:!!t.data.premium}),[2]}}))}))}}},t.config=p.atom({key:"config",default:{breakConnections:!1}}),t.useConfig=function(){var e=s(b.useRecoilObjectWithImmer(t.config),2);return{data:e[0],set:e[1]}},t.proxyProvider=p.atom({key:"proxyProvider",default:[]}),t.useProxyProviders=function(){var e=s(p.useRecoilState(t.proxyProvider),2),n=e[0],r=e[1];return{providers:n,update:function(){return u(this,void 0,void 0,(function(){var e,t;return l(this,(function(n){switch(n.label){case 0:return[4,g.getProxyProviders()];case 1:return e=n.sent(),t=Object.keys(e.data.providers).map((function(t){return e.data.providers[t]})).filter((function(e){return"default"!==e.name})).filter((function(e){return"Compatible"!==e.vehicleType})),r(t),[2]}}))}))}}},t.ruleProvider=p.atom({key:"ruleProvider",default:[]}),t.useRuleProviders=function(){var e=s(p.useRecoilState(t.ruleProvider),2),n=e[0],r=e[1],o=s(p.useRecoilState(t.version),1)[0].premium;return{providers:n,update:function(){return u(this,void 0,void 0,(function(){var e,t;return l(this,(function(n){switch(n.label){case 0:return o?[4,g.getRuleProviders()]:[2];case 1:return e=n.sent(),t=Object.keys(e.data.providers).map((function(t){return e.data.providers[t]})),r(t),[2]}}))}))}}},t.general=p.atom({key:"general",default:{}}),t.useGeneral=function(){var e=s(p.useRecoilState(t.general),2),n=e[0],r=e[1];return{general:n,update:v.default((function(){var e;return u(this,void 0,void 0,(function(){var t,n;return l(this,(function(o){switch(o.label){case 0:return[4,g.getConfig()];case 1:return t=o.sent(),n=t.data,r({port:n.port,socksPort:n["socks-port"],mixedPort:null!==(e=n["mixed-port"])&&void 0!==e?e:0,redirPort:n["redir-port"],mode:n.mode.toLowerCase(),logLevel:n["log-level"],allowLan:n["allow-lan"]}),[2]}}))}))}),50)}},t.proxies=p.atom({key:"proxies",default:{proxies:[],groups:[],global:{}}}),t.useProxy=function(){var e=s(b.useRecoilObjectWithImmer(t.proxies),2),n=e[0],o=e[1];return{proxies:n.proxies,groups:n.groups,global:n.global,update:function(){return u(this,void 0,void 0,(function(){var e,t,n,a,i,u,c,f;return l(this,(function(l){switch(l.label){case 0:return[4,g.getProxies()];case 1:return e=l.sent(),(t=e.data.proxies.GLOBAL).name="GLOBAL",n=new Set(["Selector","URLTest","Fallback","LoadBalance"]),a=new Set(["DIRECT","REJECT","GLOBAL"]),i=t.all.filter((function(e){return!a.has(e)})).map((function(t){return r(r({},e.data.proxies[t]),{name:t})})),u=s(_.partition(i,(function(e){return!n.has(e.type)})),2),c=u[0],f=u[1],o({proxies:c,groups:f,global:t}),[2]}}))}))},set:o}},t.proxyMapping=p.selector({key:"proxyMapping",get:function(e){var n,r,o,a,i,u,l=e.get,s=l(t.proxies),c=l(t.proxyProvider),d=new Map;try{for(var p=f(s.proxies),h=p.next();!h.done;h=p.next())b=h.value,d.set(b.name,b)}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}try{for(var v,m=f(c),y=m.next();!y.done;y=m.next()){v=y.value;try{for(var b,g=(i=void 0,f(v.proxies)),_=g.next();!_.done;_=g.next())b=_.value,d.set(b.name,b)}catch(e){i={error:e}}finally{try{_&&!_.done&&(u=g.return)&&u.call(g)}finally{if(i)throw i.error}}}}catch(e){o={error:e}}finally{try{y&&!y.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}return d}}),t.clashxData=p.atom({key:"clashxData",default:{isClashX:!1,startAtLogin:!1,systemProxy:!1}}),t.useClashXData=function(){var e=s(p.useRecoilState(t.clashxData),2),n=e[0],r=e[1];return{data:n,update:function(){var e,t;return u(this,void 0,void 0,(function(){var n,o;return l(this,(function(a){switch(a.label){case 0:return w.isClashX()?[4,null===w.jsBridge||void 0===w.jsBridge?void 0:w.jsBridge.getStartAtLogin()]:[2];case 1:return n=null!==(e=a.sent())&&void 0!==e&&e,[4,null===w.jsBridge||void 0===w.jsBridge?void 0:w.jsBridge.isSystemProxySet()];case 2:return o=null!==(t=a.sent())&&void 0!==t&&t,r({startAtLogin:n,systemProxy:o,isClashX:!0}),[2]}}))}))}}},t.apiData=p.atom({key:"apiData",default:{hostname:"127.0.0.1",port:"9090",secret:""}}),t.useAPIInfo=function(){var e=s(p.useRecoilState(t.apiData),2),n=e[0],o=e[1];return{data:n,fetch:function(){return u(this,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return[4,g.getExternalControllerConfig()];case 1:return e=t.sent(),o(r({},e)),[2]}}))}))},update:function(e){return u(this,void 0,void 0,(function(){var t,n,r;return l(this,(function(){return t=e.hostname,n=e.port,r=e.secret,_.setLocalStorageItem("externalControllerAddr",t),_.setLocalStorageItem("externalControllerPort",n),_.setLocalStorageItem("secret",r),window.location.reload(),[2]}))}))}}},t.rules=p.atom({key:"rules",default:[]}),t.useRule=function(){var e=s(b.useRecoilObjectWithImmer(t.rules),2),n=e[0],r=e[1];return{rules:n,update:function(){return u(this,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return[4,g.getRules()];case 1:return e=t.sent(),r(e.data.rules),[2]}}))}))}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setLanguage=t.getLanguage=t.locales=t.Language=void 0;var a=n(4),i=o(n(127)),u=o(n(128));t.Language={en_US:i.default,zh_CN:u.default};t.locales=Object.keys(t.Language),t.getLanguage=function(){var e,n,o=a.getLocalStorageItem("language");if(o&&t.locales.includes(o))return o;var i=function(){var e,t,n=[];if(window.navigator)if(window.navigator.languages)try{for(var o,a=r(window.navigator.languages),i=a.next();!i.done;i=a.next())o=i.value,n.push(o)}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else window.navigator.language&&n.push(navigator.language);return n}();try{for(var u,l=r(i),s=l.next();!s.done;s=l.next()){if((u=s.value).includes("zh"))return"zh_CN";if(u.includes("us"))return"en_US"}}catch(n){e={error:n}}finally{try{s&&!s.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return"en_US"},t.setLanguage=function(e){a.setLocalStorageItem("language",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SideBar:{Proxies:"Proxies",Overview:"Overview",Logs:"Logs",Rules:"Rules",Settings:"Setting",Connections:"Connections",Version:"Version"},Settings:{title:"Settings",labels:{startAtLogin:"Start at login",language:"language",setAsSystemProxy:"Set as system proxy",allowConnectFromLan:"Allow connect from Lan",proxyMode:"Mode",socks5ProxyPort:"Socks5 proxy port",httpProxyPort:"HTTP proxy port",mixedProxyPort:"Mixed proxy port",externalController:"External controller"},values:{cn:"中文",en:"English",global:"Global",rules:"Rules",direct:"Direct",script:"Script"},versionString:"Current ClashX is the latest version：{{version}}",checkUpdate:"Check Update",externalControllerSetting:{title:"External Controller",note:"Please note that modifying this configuration will only configure Dashboard. Will not modify your Clash configuration file. Please make sure that the external controller address matches the address in the Clash configuration file, otherwise, Dashboard will not be able to connect to Clash.",host:"Host",port:"Port",secret:"Secret"}},Logs:{title:"Logs"},Rules:{title:"Rules",providerTitle:"Providers",providerUpdateTime:"Last updated at",ruleCount:"Rule count"},Connections:{title:"Connections",keepClosed:"Keep closed connections",total:{text:"total",upload:"upload",download:"download"},closeAll:{title:"Warning",content:"This would close all connections"},columns:{host:"Host",network:"Network",type:"Type",chains:"Chains",rule:"Rule",time:"Time",speed:"Speed",upload:"Upload",download:"Download"}},Proxies:{title:"Proxies",editDialog:{title:"Edit Proxy",color:"Color",name:"Name",type:"Type",server:"Server",port:"Port",password:"Password",cipher:"Cipher",obfs:"Obfs","obfs-host":"Obfs-host",uuid:"UUID",alterId:"AlterId",tls:"TLS"},groupTitle:"Policy Group",providerTitle:"Providers",providerUpdateTime:"Last updated at",expandText:"Expand",collapseText:"Collapse",speedTestText:"Speed Test",breakConnectionsText:"Close connections which include the group"},Modal:{ok:"Ok",cancel:"Cancel"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={SideBar:{Proxies:"代理",Overview:"总览",Logs:"日志",Rules:"规则",Settings:"设置",Connections:"连接",Version:"版本"},Settings:{title:"设置",labels:{startAtLogin:"开机时启动",language:"语言",setAsSystemProxy:"设置为系统代理",allowConnectFromLan:"允许来自局域网的连接",proxyMode:"代理模式",socks5ProxyPort:"Socks5 代理端口",httpProxyPort:"HTTP 代理端口",mixedProxyPort:"混合代理端口",externalController:"外部控制设置"},values:{cn:"中文",en:"English",global:"全局",rules:"规则",direct:"直连",script:"脚本"},versionString:"当前 ClashX 已是最新版本：{{version}}",checkUpdate:"检查更新",externalControllerSetting:{title:"编辑外部控制设置",note:"请注意，修改该配置项并不会修改你的 Clash 配置文件，请确认修改后的外部控制地址和 Clash 配置文件内的地址一致，否则会导致 Dashboard 无法连接。",host:"Host",port:"端口",secret:"密钥"}},Logs:{title:"日志"},Rules:{title:"规则",providerTitle:"规则集",providerUpdateTime:"最后更新于",ruleCount:"规则条数"},Connections:{title:"连接",keepClosed:"保留关闭连接",total:{text:"总量",upload:"上传",download:"下载"},closeAll:{title:"警告",content:"将会关闭所有连接"},columns:{host:"域名",network:"网络",type:"类型",chains:"节点链",rule:"规则",time:"连接时间",speed:"速率",upload:"上传",download:"下载"}},Proxies:{title:"代理",editDialog:{title:"编辑代理",color:"颜色",name:"名字",type:"类型",server:"服务器",port:"端口",password:"密码",cipher:"加密方式",obfs:"Obfs","obfs-host":"Obfs-host",uuid:"UUID",alterId:"AlterId",tls:"TLS"},groupTitle:"策略组",providerTitle:"代理集",providerUpdateTime:"最后更新于",expandText:"展开",collapseText:"收起",speedTestText:"测速",breakConnectionsText:"切换时打断包含策略组的连接"},Modal:{ok:"确 定",cancel:"取 消"}}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useRecoilObjectWithImmer=void 0;var u=n(15),l=i(n(21)),s=n(0);t.useRecoilObjectWithImmer=function(e){var t=o(u.useRecoilState(e),2),n=t[0],i=t[1];return[n,s.useCallback((function(e,t){"string"==typeof e?i((function(n){return l.default(n,(function(n){n[e]=t}))})):"function"==typeof e?i((function(t){return l.default(t,e)})):"object"===r(e)&&i((function(t){return l.default(t,(function(t){var n,r,o=e;try{for(var i=a(Object.keys(o)),u=i.next();!u.done;u=i.next()){var l=u.value;t[l]=o[l]}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}))}))}),[n])]}},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u};Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncSingleton=void 0,t.createAsyncSingleton=function(e){var t=null;return function(){return r(this,void 0,void 0,(function(){return o(this,(function(){return t?[2,t]:[2,(t=e()).catch((function(e){throw t=null,e}))]}))}))}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StreamReader=void 0;var l=u(n(37)),s=n(4),c=function(){function e(e){this.EE=new l.default,this.innerBuffer=[],this.isClose=!1,this.config=Object.assign({bufferLength:0,retryInterval:5e3,headers:{}},e),this.config.useWebsocket?this.websocketLoop():this.loop()}return e.prototype.websocketLoop=function(){var e,t=this,n=new URL(this.config.url);n.protocol="http:"===location.protocol?"ws:":"wss:",n.searchParams.set("token",null!==(e=this.config.token)&&void 0!==e?e:"");var r=new WebSocket(n.toString());r.addEventListener("message",(function(e){var n=JSON.parse(e.data);t.EE.emit("data",[n]),0<t.config.bufferLength&&(t.innerBuffer.push(n),t.innerBuffer.length>t.config.bufferLength&&t.innerBuffer.splice(0,t.innerBuffer.length-t.config.bufferLength))})),r.addEventListener("close",(function(){return setTimeout(t.websocketLoop,t.config.retryInterval)})),r.addEventListener("error",(function(e){t.EE.emit("error",e),setTimeout(t.websocketLoop,t.config.retryInterval)}))},e.prototype.loop=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,u,l,c,f,d,p,h;return o(this,(function(o){switch(o.label){case 0:return[4,s.to(fetch(this.config.url,{mode:"cors",headers:this.config.token?{Authorization:"Bearer "+this.config.token}:{}}))];case 1:if(e=a.apply(void 0,[o.sent(),2]),t=e[0],(n=e[1])||!t.body)return this.retry(n),[2];r=t.body.getReader(),u=new TextDecoder,o.label=2;case 2:return this.isClose?[3,4]:[4,s.to(null==r?void 0:r.read())];case 3:return l=a.apply(void 0,[o.sent(),2]),c=l[0].value,(f=l[1])?(this.retry(f),[3,4]):(d=u.decode(c).trim().split("\n"),p=d.map((function(e){return JSON.parse(e)})),this.EE.emit("data",p),0<this.config.bufferLength&&((h=this.innerBuffer).push.apply(h,i(p)),this.innerBuffer.length>this.config.bufferLength&&this.innerBuffer.splice(0,this.innerBuffer.length-this.config.bufferLength)),[3,2]);case 4:return[2]}}))}))},e.prototype.retry=function(e){this.isClose||(this.EE.emit("error",e),window.setTimeout(this.loop,this.config.retryInterval))},e.prototype.subscribe=function(e,t){this.EE.addListener(e,t)},e.prototype.unsubscribe=function(e,t){this.EE.removeListener(e,t)},e.prototype.buffer=function(){return this.innerBuffer.slice()},e.prototype.destory=function(){this.EE.removeAllListeners(),this.isClose=!0},e}();t.StreamReader=c},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;var u=a(n(0)),l=n(4),s=i(n(1));n(152),t.Input=function(e){var t=e.className,n=e.style,r=e.value,o=void 0===r?"":r,a=e.align,i=void 0===a?"center":a,c=e.inside,f=e.autoFocus,d=e.type,p=void 0===d?"text":d,h=e.disabled,v=e.onChange,m=void 0===v?l.noop:v,y=e.onBlur,b=void 0===y?l.noop:y,g=s.default("input","input-align-"+i,{"input-inside":void 0!==c&&c},t);return u.createElement("input",{disabled:void 0!==h&&h,className:g,style:n,value:o,autoFocus:void 0!==f&&f,type:p,onChange:function(e){return m(e.target.value,e)},onBlur:b})}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Option=t.Select=void 0;var l=a(n(0)),s=u(n(1)),c=n(5),f=n(4),d=n(12);n(154),t.Select=function(e){function t(e){var t=h.current;(null==t?void 0:t.contains(e.target))&&b(!1)}var n,r=e.value,o=e.onSelect,a=e.children,u=e.className,f=e.style,p=l.useRef(),h=l.useRef(null),v=l.useRef(null),m=i(l.useState(!1),2),y=m[0],b=m[1],g=i(l.useState(!1),2),_=g[0],w=g[1],P=l.useMemo((function(){var e=Math.floor;if(v.current){var t=v.current.getBoundingClientRect();return{top:e(t.top)-10,left:e(t.left)-10}}return{}}),[]);l.useLayoutEffect((function(){return document.addEventListener("click",t,!0),function(){document.addEventListener("click",t,!0),p.current&&document.body.removeChild(p.current)}}),[]);var E=l.useMemo((function(){var e=null;return l.default.Children.forEach(a,(function(t){var n;(null===(n=null==t?void 0:t.props)||void 0===n?void 0:n.value)===r&&(e=t)})),e}),[r,a]),x=l.useMemo((function(){return l.default.Children.map(null!=a?a:[],(function(e){if(!e.props||!e.type)return e;var t=e.props.value===r?s.default(e.props.className,"selected"):e.props.className,n=e.props.onClick;return l.default.cloneElement(e,Object.assign({},e.props,{onClick:function(t){null==o||o(e.props.value,t),b(!1),n&&n(t)},className:t}))}))}),[a,r,o]),O=l.default.createElement("div",{className:s.default("select-list",{"select-list-show":y}),ref:h,style:P},l.default.createElement("ul",{className:"list"},x));return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:s.default("select",u),style:f,ref:v,onClick:function(){if(!_){if(!p.current){var e=document.createElement("div");document.body.appendChild(e),p.current=e}w(!0)}b(!0)}},null===(n=null==E?void 0:E.props)||void 0===n?void 0:n.children,l.default.createElement(c.Icon,{type:"triangle-down"})),_&&d.createPortal(O,null==p?void 0:p.current))},t.Option=function(e){var t=e.className,n=e.style,r=e.key,o=e.disabled,a=e.children,i=e.onClick,u=void 0===i?f.noop:i,c=s.default("option",{disabled:void 0!==o&&o},t);return l.default.createElement("li",{className:c,style:n,key:r,onClick:u},a)}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;var u=a(n(0)),l=i(n(1)),s=n(12),c=n(5),f=n(4),d=n(6);n(156),t.Modal=function(e){var t=e.show,n=e.title,r=void 0===n?"Modal":n,o=e.size,a=void 0===o?"small":o,i=e.footer,p=e.onOk,h=void 0===p?f.noop:p,v=e.onClose,m=void 0===v?f.noop:v,y=e.bodyClassName,b=e.bodyStyle,g=e.className,_=e.style,w=e.children,P=(0,d.useI18n().useTranslation)("Modal").t,E=u.useRef(document.createElement("div")),x=u.useRef(null);u.useLayoutEffect((function(){return document.body.appendChild(E.current),function(){document.body.removeChild(E.current)}}),[]);var O=u.default.createElement("div",{className:l.default("modal-mask",{"modal-show":!(void 0!==t)||t}),ref:x,onClick:function(e){e.target===x.current&&m()}},u.default.createElement("div",{className:l.default("modal","modal-"+a,g),style:_},u.default.createElement("div",{className:"modal-title"},r),u.default.createElement("div",{className:l.default("modal-body",y),style:b},w),(!(void 0!==i)||i)&&u.default.createElement("div",{className:"footer"},u.default.createElement(c.Button,{onClick:function(){return m()}},P("cancel")),u.default.createElement(c.Button,{type:"primary",onClick:function(){return h()}},P("ok")))));return s.createPortal(O,E.current)}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Alert=void 0;var u=a(n(0)),l=i(n(1)),s=n(5);n(158);var c={success:"check",info:"info",warning:"info",error:"close"};t.Alert=function(e){var t=e.message,n=void 0===t?"":t,r=e.type,o=void 0===r?"info":r,a=e.inside,i=e.children,f=e.className,d=e.style,p=l.default("alert","alert-"+(void 0!==a&&a?"note":"box")+"-"+o,f);return u.createElement("div",{className:p,style:d},u.createElement("span",{className:"alert-icon"},u.createElement(s.Icon,{type:c[o],size:26})),n?u.createElement("p",{className:"alert-message"},n):u.createElement("div",{className:"alert-message"},i))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var u=a(n(0)),l=i(n(1)),s=n(4);n(160),t.Button=function(e){var t=e.type,n=void 0===t?"normal":t,r=e.onClick,o=void 0===r?s.noop:r,a=e.children,i=e.className,c=e.style,f=l.default("button","button-"+n,i);return u.createElement("button",{className:f,style:c,onClick:o},a)}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.error=t.warning=t.success=t.info=t.showMessage=t.Message=void 0;var l=i(n(0)),s=u(n(1)),c=n(12),f=n(5),d=n(4),p=n(10);n(162);var h={info:"info",success:"check",warning:"info-o",error:"close"};function v(e){var t=e.removeComponent,n=void 0===t?d.noop:t,r=e.onClose,o=void 0===r?d.noop:r,a=e.icon,i=void 0===a?l.default.createElement(f.Icon,{type:"info",size:16}):a,u=e.content,c=void 0===u?"":u,h=e.type,v=void 0===h?"info":h,m=e.duration,y=void 0===m?1500:m,b=p.useVisible(),g=b.visible,_=b.show,w=b.hide;return l.useLayoutEffect((function(){window.setTimeout((function(){return _()}),0);var e=window.setTimeout((function(){w(),o()}),y);return function(){return window.clearTimeout(e)}}),[]),l.default.createElement("div",{className:s.default("message","message-"+v,{"message-show":g}),onTransitionEnd:function(){return!g&&n()}},l.default.createElement("span",{className:"message-icon"},i),l.default.createElement("span",{className:"message-content"},c))}function m(e){var t=document.createElement("div");document.body.appendChild(t);var n=l.default.createElement(f.Icon,{type:h[e.type],size:16}),o=e.type,a=e.content,i=e.duration,u=e.onClose;c.render(l.default.createElement(v,r({},{icon:n,type:o,content:a,removeComponent:function(){c.unmountComponentAtNode(t)&&document.body.removeChild(t)},duration:i,onClose:u})),t)}t.Message=v,t.showMessage=m,t.info=function(e,t,n){return m({type:"info",content:e,duration:t,onClose:n})},t.success=function(e,t,n){return m({type:"success",content:e,duration:t,onClose:n})},t.warning=function(e,t,n){return m({type:"warning",content:e,duration:t,onClose:n})},t.error=function(e,t,n){return m({type:"error",content:e,duration:t,onClose:n})}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Checkbox=void 0;var u=a(n(0)),l=n(5),s=n(4),c=i(n(1));n(164),t.Checkbox=function(e){var t=e.className,n=e.checked,r=void 0!==n&&n,o=e.onChange,a=void 0===o?s.noop:o,i=c.default("checkbox",{checked:r},t);return u.createElement("div",{className:i,onClick:function(){a(!r)}},u.createElement(l.Icon,{className:"checkbox-icon",type:"check",size:18}),u.createElement("div",null,e.children))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=void 0;var l=i(n(0)),s=u(n(1));n(166),t.Tag=function(e){var t=e.color,n=e.className,o=e.style,a=s.default("tag",n),i=r({color:t},o),u=r(r({},e),{className:a,style:i});return l.createElement("span",r({},u),e.children)}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Loading=void 0;var o=r(n(0)),a=r(n(1)),i=n(168);n(170),t.Loading=function(e){var t=a.default("loading","visible",e.className);return e.visible?o.default.createElement("div",{className:t},o.default.createElement(i.Spinner,{className:e.spinnerClassName})):null}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Spinner=void 0;var u=a(n(0)),l=i(n(1));n(169),t.Spinner=function(e){var t=l.default("spinner",e.className);return u.createElement("div",{className:t},u.createElement("div",{className:"spinner-circle"},u.createElement("div",{className:"spinner-inner"})),u.createElement("div",{className:"spinner-circle"},u.createElement("div",{className:"spinner-inner"})),u.createElement("div",{className:"spinner-circle"},u.createElement("div",{className:"spinner-inner"})),u.createElement("div",{className:"spinner-circle"},u.createElement("div",{className:"spinner-inner"})),u.createElement("div",{className:"spinner-circle"},u.createElement("div",{className:"spinner-inner"})))}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"==n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(48),t),o(n(173),t),o(n(175),t)},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;var s=a(n(0)),c=n(15),f=n(6),d=n(9),p=n(5);n(174),t.Group=function(e){var t=f.useProxy().update,n=c.useRecoilValue(f.proxyMapping),r=f.useConfig().data,o=e.config,a=s.useMemo((function(){var e,t,r,a=new Set;try{for(var i=l(o.all),u=i.next();!u.done;u=i.next()){var s=u.value,c=null===(r=n.get(s))||void 0===r?void 0:r.history;(null==c?void 0:c.length)&&0===c.slice(-1)[0].delay&&a.add(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return a}),[n]),h="Selector"===o.type;return s.default.createElement("div",{className:"proxy-group"},s.default.createElement("div",{className:"proxy-group-part"},s.default.createElement("span",{className:"proxy-group-name"},o.name),s.default.createElement(p.Tag,{className:"proxy-group-type"},o.type)),s.default.createElement("div",{className:"proxy-group-tags-container"},s.default.createElement(p.Tags,{className:"proxy-group-tags",data:o.all,onClick:function(n){return i(this,void 0,void 0,(function(){var o,a,i,s,c,f,p,h,v,m,y,b;return u(this,(function(u){switch(u.label){case 0:return[4,d.changeProxySelected(e.config.name,n)];case 1:return u.sent(),[4,t()];case 2:return u.sent(),r.breakConnections?(o=[],[4,d.getConnections()]):[3,4];case 3:a=u.sent();try{for(i=l(a.data.connections),s=i.next();!s.done;s=i.next())(c=s.value).chains.includes(e.config.name)&&o.push(c.id)}catch(e){v={error:e}}finally{try{s&&!s.done&&(m=i.return)&&m.call(i)}finally{if(v)throw v.error}}try{for(f=l(o),p=f.next();!p.done;p=f.next())h=p.value,d.closeConnection(h)}catch(e){y={error:e}}finally{try{p&&!p.done&&(b=f.return)&&b.call(f)}finally{if(y)throw y.error}}u.label=4;case 4:return[2]}}))}))},errSet:a,select:o.now,canClick:h,rowHeight:30})))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=void 0;var i=a(n(0)),u=n(0),l=n(5),s=n(6),c=n(27),f=n(9),d=n(10),p=n(48),h=n(35);n(178),t.Provider=function(e){var t=s.useProxyProviders().update,n=s.useI18n(),r=n.useTranslation,o=n.lang,a=e.provider,v=r("Proxies").t,m=d.useVisible(),y=m.visible,b=m.hide,g=m.show,_=u.useMemo((function(){return a.proxies.slice().sort((function(e,t){return-1*h.compareDesc(e,t)}))}),[a.proxies]);return i.createElement(l.Card,{className:"proxy-provider"},i.createElement(l.Loading,{visible:y}),i.createElement("div",{className:"proxy-provider-header"},i.createElement("div",{className:"proxy-provider-header-part"},i.createElement("span",{className:"proxy-provider-name"},a.name),i.createElement(l.Tag,null,a.vehicleType)),i.createElement("div",{className:"proxy-provider-header-part"},a.updatedAt&&i.createElement("span",{className:"proxy-provider-update"},v("providerUpdateTime")+": "+c.fromNow(new Date(a.updatedAt),o)),i.createElement(l.Icon,{className:"proxy-provider-icon healthcheck",type:"healthcheck",size:18,onClick:function(){g(),f.healthCheckProvider(a.name).then((function(){return t()})).finally((function(){return b()}))}}),i.createElement(l.Icon,{className:"proxy-provider-icon",type:"update",size:18,onClick:function(){g(),f.updateProvider(a.name).then((function(){return t()})).finally((function(){return b()}))}}))),i.createElement("ul",{className:"proxies-list"},_.map((function(e){return i.createElement("li",{key:e.name},i.createElement(p.Proxy,{className:"proxy-provider-item",config:e}))}))))}},,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=i(n(0)),d=c(n(28)),p=n(6),h=n(5),v=n(9);n(181),t.default=function(){var e=f.useRef(null),t=f.useRef([]),n=s(f.useState([]),2),o=n[0],a=n[1],i=(0,p.useI18n().useTranslation)("Logs").t;return f.useLayoutEffect((function(){var t=e.current;t&&(t.scrollTop=t.scrollHeight)}),[t.current]),f.useEffect((function(){function e(e){t.current=t.current.slice().concat(e.map((function(e){return r(r({},e),{time:new Date})}))),a(t.current)}var n=null;return function(){u(this,void 0,void 0,(function(){return l(this,(function(r){switch(r.label){case 0:return[4,v.getLogsStreamReader()];case 1:return n=r.sent(),t.current=n.buffer(),a(t.current),n.subscribe("data",e),[2]}}))}))}(),function(){return null==n?void 0:n.unsubscribe("data",e)}}),[]),f.default.createElement("div",{className:"page"},f.default.createElement(h.Header,{title:i("title")}),f.default.createElement(h.Card,{className:"logs-card"},f.default.createElement("ul",{className:"logs-panel",ref:e},o.map((function(e,t){return f.default.createElement("li",{key:t},f.default.createElement("span",{className:"logs-panel-time"},d.default(e.time).format("YYYY-MM-DD HH:mm:ss")),f.default.createElement("span",null,"[",e.type,"] ",e.payload))})))))}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(n(0)),l=n(5),s=n(6),c=n(213),f=i(n(183)),d=i(n(29)),p=n(184);function h(){var e=s.useRuleProviders(),t=e.providers,n=e.update,r=s.useVersion().premium,o=(0,s.useI18n().useTranslation)("Rules").t;return u.useLayoutEffect((function(){r&&n()}),[r]),u.default.createElement(u.default.Fragment,null,0!==t.length&&u.default.createElement("div",{className:"proxies-container"},u.default.createElement(l.Header,{title:o("providerTitle")}),u.default.createElement("ul",{className:"proxies-providers-list"},t.map((function(e){return u.default.createElement("li",{className:"proxies-providers-item",key:e.name},u.default.createElement(p.Provider,{provider:e}))})))))}n(186),t.default=function(){function e(e){var t=e.index,r=e.style,o=n[t];return u.default.createElement("li",{className:"rule-item",style:r},u.default.createElement(l.Row,{className:"rule-item-row",gutter:24,align:"middle"},u.default.createElement(l.Col,{className:"rule-type",span:6,offset:1},o.type),u.default.createElement(l.Col,{className:"payload",span:11},o.payload),u.default.createElement(l.Col,{className:"rule-proxy",span:6},o.proxy)))}var t=s.useRule(),n=t.rules,r=t.update,o=(0,s.useI18n().useTranslation)("Rules").t;return d.default("rules",r),u.default.createElement("div",{className:"page"},u.default.createElement(h,null),u.default.createElement(l.Header,{title:o("title")}),u.default.createElement(l.Card,{className:"rules-card"},u.default.createElement(f.default,{className:"rules"},(function(t){var r=t.height,o=t.width;return u.default.createElement(c.FixedSizeList,{height:r,width:o,itemCount:n.length,itemSize:50},e)}))))}},,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Provider=void 0;var u=a(n(0)),l=i(n(1)),s=n(5),c=n(6),f=n(27),d=n(9),p=n(10);n(185),t.Provider=function(e){var t=c.useRuleProviders().update,n=c.useI18n(),r=n.useTranslation,o=n.lang,a=e.provider,i=r("Rules").t,h=p.useVisible(),v=h.visible,m=h.hide,y=h.show,b=l.default("rule-provider-icon",{"rule-provider-loading":v});return u.createElement(s.Card,{className:"rule-provider"},u.createElement("div",{className:"rule-provider-header"},u.createElement("div",{className:"rule-provider-header-part"},u.createElement("span",{className:"rule-provider-name"},a.name),u.createElement(s.Tag,null,a.vehicleType),u.createElement(s.Tag,{className:"rule-provider-behavior"},a.behavior),u.createElement("span",{className:"rule-provider-update"},i("ruleCount")+": "+a.ruleCount)),u.createElement("div",{className:"rule-provider-header-part"},a.updatedAt&&u.createElement("span",{className:"rule-provider-update"},i("providerUpdateTime")+": "+f.fromNow(new Date(a.updatedAt),o)),u.createElement(s.Icon,{className:b,type:"update",size:18,onClick:function(){y(),d.updateRuleProvider(a.name).then((function(){return t()})).finally((function(){return m()}))}}))))}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},l=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(n(0)),f=s(n(1)),d=s(n(188)),p=n(5),h=n(6),v=n(9),m=n(10),y=n(11);n(196);var b=[{label:"中文",value:"zh_CN"},{label:"English",value:"en_US"}];t.default=function(){var e=h.useVersion().premium,t=h.useClashXData(),n=t.data,r=t.update,o=h.useGeneral(),a=o.general,s=o.update,g=h.useIdentity().set,_=h.useAPIInfo().data,w=h.useI18n(),P=w.useTranslation,E=w.setLang,x=w.lang,O=P("Settings").t,C=l(m.useObject({socks5ProxyPort:7891,httpProxyPort:7890,mixedProxyPort:0}),2),S=C[0],j=C[1];c.useEffect((function(){s(),r()}),[]),c.useEffect((function(){var e,t,n;j("socks5ProxyPort",null!==(e=null==a?void 0:a.socksPort)&&void 0!==e?e:0),j("httpProxyPort",null!==(t=null==a?void 0:a.port)&&void 0!==t?t:0),j("mixedProxyPort",null!==(n=null==a?void 0:a.mixedPort)&&void 0!==n?n:0)}),[a]);var M=_.hostname,k=_.port,N=a.allowLan,D=a.mode,T=n.startAtLogin,I=n.systemProxy,R=c.useMemo((function(){var t=[{label:O("values.global"),value:"Global"},{label:O("values.rules"),value:"Rule"},{label:O("values.direct"),value:"Direct"}];return e&&t.push({label:O("values.script"),value:"Script"}),t}),[O,e]);return c.default.createElement("div",{className:"page"},c.default.createElement(p.Header,{title:O("title")}),c.default.createElement(p.Card,{className:"settings-card"},c.default.createElement(p.Row,{gutter:24,align:"middle"},c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:14,offset:1},c.default.createElement("span",{className:"label"},O("labels.startAtLogin"))),c.default.createElement(p.Col,{span:8,className:"value-column"},c.default.createElement(p.Switch,{disabled:!n.isClashX,checked:T,onChange:function(e){return i(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,null===y.jsBridge||void 0===y.jsBridge?void 0:y.jsBridge.setStartAtLogin(e)];case 1:return t.sent(),r(),[2]}}))}))}}))),c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:8,offset:1},c.default.createElement("span",{className:"label"},O("labels.language"))),c.default.createElement(p.Col,{span:14,className:"value-column"},c.default.createElement(p.ButtonSelect,{options:b,value:x,onSelect:function(e){return function(e){E(e)}(e)}})))),c.default.createElement(p.Row,{gutter:24,align:"middle"},c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:14,offset:1},c.default.createElement("span",{className:"label"},O("labels.setAsSystemProxy"))),c.default.createElement(p.Col,{span:8,className:"value-column"},c.default.createElement(p.Switch,{disabled:!n.isClashX,checked:I,onChange:function(e){return i(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,null===y.jsBridge||void 0===y.jsBridge?void 0:y.jsBridge.setSystemProxy(e)];case 1:return t.sent(),r(),[2]}}))}))}}))),c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:14,offset:1},c.default.createElement("span",{className:"label"},O("labels.allowConnectFromLan"))),c.default.createElement(p.Col,{span:8,className:"value-column"},c.default.createElement(p.Switch,{checked:N,onChange:function(e){return i(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,v.updateConfig({"allow-lan":e})];case 1:return t.sent(),[4,s()];case 2:return t.sent(),[2]}}))}))}}))))),c.default.createElement(p.Card,{className:"settings-card"},c.default.createElement(p.Row,{gutter:24,align:"middle"},c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:8,offset:1},c.default.createElement("span",{className:"label"},O("labels.proxyMode"))),c.default.createElement(p.Col,{span:14,className:"value-column"},c.default.createElement(p.ButtonSelect,{options:R,value:d.default(D),onSelect:function(e){return i(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,v.updateConfig({mode:e})];case 1:return t.sent(),[4,s()];case 2:return t.sent(),[2]}}))}))}}))),c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:14,offset:1},c.default.createElement("span",{className:"label"},O("labels.socks5ProxyPort"))),c.default.createElement(p.Col,{span:8},c.default.createElement(p.Input,{disabled:n.isClashX,value:S.socks5ProxyPort,onChange:function(e){return j("socks5ProxyPort",+e)},onBlur:function(){return i(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,v.updateConfig({"socks-port":S.socks5ProxyPort})];case 1:return e.sent(),[4,s()];case 2:return e.sent(),[2]}}))}))}})))),c.default.createElement(p.Row,{gutter:24,align:"middle"},c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:14,offset:1},c.default.createElement("span",{className:"label"},O("labels.httpProxyPort"))),c.default.createElement(p.Col,{span:8},c.default.createElement(p.Input,{disabled:n.isClashX,value:S.httpProxyPort,onChange:function(e){return j("httpProxyPort",+e)},onBlur:function(){return i(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,v.updateConfig({port:S.httpProxyPort})];case 1:return e.sent(),[4,s()];case 2:return e.sent(),[2]}}))}))}}))),c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:14,offset:1},c.default.createElement("span",{className:"label"},O("labels.mixedProxyPort"))),c.default.createElement(p.Col,{span:8},c.default.createElement(p.Input,{disabled:n.isClashX,value:S.mixedProxyPort,onChange:function(e){return j("mixedProxyPort",+e)},onBlur:function(){return i(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,v.updateConfig({"mixed-port":S.mixedProxyPort})];case 1:return e.sent(),[4,s()];case 2:return e.sent(),[2]}}))}))}})))),c.default.createElement(p.Row,null,c.default.createElement(p.Col,{span:12},c.default.createElement(p.Col,{span:12,offset:1},c.default.createElement("span",{className:"label"},O("labels.externalController"))),c.default.createElement(p.Col,{className:"external-controller",span:10},c.default.createElement("span",{className:f.default({"modify-btn":!n.isClashX}),onClick:function(){return!n.isClashX&&g(!1)}},M+":"+k))))),c.default.createElement(p.Card,{className:"clash-version",style:{display:"none"}},c.default.createElement("span",{className:"check-icon"},c.default.createElement(p.Icon,{type:"check",size:20})),c.default.createElement("p",{className:"version-info"},O("versionString")),c.default.createElement("span",{className:"check-update-btn"},O("checkUpdate"))))}},,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=a(n(0)),l=n(30),s=i(n(1)),c=n(6);n(198);var f=i(n(199)),d=i(n(29));t.default=function(e){var t=e.routes,n=c.useI18n().useTranslation,r=c.useVersion(),o=r.version,a=r.premium,i=r.update,p=c.useClashXData(),h=p.data.isClashX,v=p.update,m=n("SideBar").t;d.default("version",i),d.default("clashx",v);var y=t.map((function(e){var t=e.path,n=e.name,r=e.exact,o=e.noMobile;return u.createElement("li",{className:s.default("item",{"no-mobile":o}),key:n},u.createElement(l.NavLink,{to:t,activeClassName:"active",exact:!!r},m(n)))}));return u.createElement("div",{className:"sidebar"},u.createElement("img",{src:f.default,className:"sidebar-logo"}),u.createElement("ul",{className:"sidebar-menu"},y),u.createElement("div",{className:"sidebar-version"},u.createElement("span",{className:"sidebar-version-label"},"Clash",h&&"X"," ",m("Version")),u.createElement("span",{className:"sidebar-version-text"},o),a&&u.createElement("span",{className:"sidebar-version-label"},"Premium")))}},function(e,t,n){},function(e,t,n){"use strict";n.r(t),t.default=n.p+"img/ffac0fa1d89f15922b4594863b8b32e9.png"},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},u=this&&this.__awaiter||function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function u(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):o(e.value).then(i,u)}l((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(i=2&n[0]?a.return:n[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,a=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(!(i=l.trys,(i=0<i.length&&i[i.length-1])||6!==n[0]&&2!==n[0])){l=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){l.label=n[1];break}if(6===n[0]&&l.label<i[1]){l.label=i[1],i=n;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(n);break}i[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,u,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var d,p,h=i(n(0)),v=n(201),m=f(n(1)),y=n(5),b=n(6),g=i(n(9)),_=n(10),w=n(4),P=n(27),E=n(203),x=n(209);n(210),(p=d||(d={})).Host="host",p.Network="network",p.Type="type",p.Chains="chains",p.Rule="rule",p.Speed="speed",p.Upload="upload",p.Download="download",p.Time="time";var O=[[d.Host,260],[d.Network,80],[d.Type,120],[d.Chains,200],[d.Rule,140],[d.Speed,200],[d.Upload,100],[d.Download,100],[d.Time,120]],C=new Set([d.Network,d.Type,d.Rule,d.Speed,d.Upload,d.Download,d.Time]),S=new Set([d.Host,d.Network,d.Type,d.Rule,d.Upload,d.Download]);function j(e){for(var t=["B","KB","MB","GB","TB"],n=0;~~(e/1024)&&n<t.length;)e/=1024,n++;return(0===n?e:e.toFixed(2))+" "+t[n]}function M(e,t){switch(!0){case 0===e&&0===t:return"-";case 0!==e&&0!==t:return"↑ "+j(e)+"/s ↓ "+j(t)+"/s";case 0!==e:return"↑ "+j(e)+"/s";default:return"↓ "+j(t)+"/s"}}t.default=function(){var e=b.useI18n(),t=e.useTranslation,n=e.lang,o=h.useMemo((function(){return t("Connections").t}),[t]),a=s(_.useObject({uploadTotal:0,downloadTotal:0}),2),i=a[0],f=a[1],d=s(_.useObject({column:"",asc:!0}),2),p=d[0],k=d[1],N=_.useVisible(),D=N.visible,T=N.show,I=N.hide,R=x.useConnections(),A=R.connections,L=R.feed,B=R.save,H=R.toggleSave,G=h.useMemo((function(){return A.sort((function(e,t){if(e.completed!==t.completed)return e.completed?1:-1;var n=new Date(e.start).getTime()-new Date(t.start).getTime();return 0==n?e.id.localeCompare(t.id):n})).map((function(e){return{id:e.id,host:(e.metadata.host||e.metadata.destinationIP)+":"+e.metadata.destinationPort,chains:e.chains.slice().reverse().join(" --\x3e "),rule:e.rule===E.RuleType.RuleSet?e.rule+"("+e.rulePayload+")":e.rule,time:P.fromNow(new Date(e.start),n),upload:j(e.upload),download:j(e.download),type:e.metadata.type,network:e.metadata.network.toUpperCase(),speed:M(e.speed.upload,e.speed.download),completed:!!e.completed}})).sort((function(e,t){return""===p.column?0:p.asc?e[p.column].localeCompare(t[p.column]):t[p.column].localeCompare(e[p.column])}))}),[A,p]),U=h.useMemo((function(){return O.map((function(e){return{Header:o("columns."+e[0]),accessor:e[0],minWidth:e[1],width:e[1]}}))}),[o]);h.useLayoutEffect((function(){function e(e){var t,n;try{for(var r,o=c(e),a=o.next();!a.done;a=o.next())r=a.value,f({uploadTotal:r.uploadTotal,downloadTotal:r.downloadTotal}),L(r.connections)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}var t=null;return function(){u(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,g.getConnectionStreamReader()];case 1:return(t=n.sent()).subscribe("data",e),[2]}}))}))}(),function(){t&&(t.unsubscribe("data",e),t.destory())}}),[]);var V=v.useTable({columns:U,data:G},v.useBlockLayout,v.useResizeColumns),X=V.getTableProps,z=V.getTableBodyProps,F=V.headerGroups,W=V.rows,J=V.prepareRow,Y=h.useMemo((function(){return F[0]}),[F]),K=h.useMemo((function(){return W.map((function(e,t){return J(e),h.default.createElement("div",r({},e.getRowProps(),{className:"connections-item",key:t}),e.cells.map((function(t,n){var o=m.default("connections-block",{center:C.has(t.column.id),completed:!!e.original.completed});return h.default.createElement("div",r({},t.getCellProps(),{className:o,key:n}),t.render("Cell"))})))}))}),[J,W]);return h.default.createElement("div",{className:"page"},h.default.createElement(y.Header,{title:o("title")},h.default.createElement("span",{className:"connections-filter total"},"("+o("total.text")+": "+o("total.upload")+" "+j(i.uploadTotal)+" "+o("total.download")+" "+j(i.downloadTotal)+")"),h.default.createElement(y.Checkbox,{className:"connections-filter",checked:B,onChange:H},o("keepClosed")),h.default.createElement(y.Icon,{className:"connections-filter dangerous",onClick:T,type:"close-all",size:20})),h.default.createElement(y.Card,{className:"connections-card"},h.default.createElement("div",r({},X(),{className:"connections"}),h.default.createElement("div",r({},Y.getHeaderGroupProps(),{className:"connections-header"}),Y.headers.map((function(e,t){var n=e.id,o=S.has(n)?function(){return function(e){e===p.column?p.asc?k("asc",!1):k({column:"",asc:!0}):k("column",e)}(n)}:w.noop;return h.default.createElement("div",r({},e.getHeaderProps(),{className:"connections-th",onClick:o,key:n}),e.render("Header"),p.column===n&&(p.asc?" ↑":" ↓"),t!==Y.headers.length-1&&h.default.createElement("div",r({},e.getResizerProps(),{className:"connections-resizer"})))}))),h.default.createElement("div",r({},z(),{className:"connections-body"}),K))),h.default.createElement(y.Modal,{title:o("closeAll.title"),show:D,onClose:I,onOk:function(){g.closeAllConnections().finally((function(){return I()}))}},o("closeAll.content")))}},,,function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"==n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(204),t),o(n(205),t),o(n(206),t),o(n(207),t),o(n(208),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Socks5ProxyConfigList=t.VmessProxyConfigList=t.SsProxyConfigList=t.ProxyType=void 0,t.ProxyType={Shadowsocks:"ss",Vmess:"vmess",Socks5:"socks5"},t.SsProxyConfigList=["name","type","server","port","cipher","password","obfs","obfs-host"],t.VmessProxyConfigList=["name","type","server","port","uuid","alterid","cipher","tls"],t.Socks5ProxyConfigList=["name","type","server","port"]},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.RuleType=void 0,(r=t.RuleType||(t.RuleType={})).Domain="Domain",r.DomainSuffix="DomainSuffix",r.DomainKeyword="DomainKeyword",r.GeoIP="GeoIP",r.IPCIDR="IPCIDR",r.SrcIPCIDR="SrcIPCIDR",r.SrcPort="SrcPort",r.DstPort="DstPort",r.MATCH="MATCH",r.RuleSet="RuleSet"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pickCipherWithAlias=t.VmessCipher=t.SsCipher=void 0,t.SsCipher=["AEAD_AES_128_GCM","AEAD_AES_192_GCM","AEAD_AES_256_GCM","AEAD_CHACHA20_POLY1305","AEAD_XCHACHA20_POLY1305","RC4-MD5","AES-128-CTR","AES-192-CTR","AES-256-CTR","AES-128-CFB","AES-192-CFB","AES-256-CFB","CHACHA20","CHACHA20-IETF","XCHACHA20"],t.VmessCipher=["auto","none","aes-128-gcm","chacha20-poly1305"],t.pickCipherWithAlias=function(e){var n=e.toUpperCase();return"CHACHA20-IETF-POLY1305"===n?"AEAD_CHACHA20_POLY1305":"XCHACHA20-IETF-POLY1305"===n?"AEAD_XCHACHA20_POLY1305":"AES-128-GCM"===n?"AEAD_AES_128_GCM":"AES-196-GCM"===n?"AEAD_AES_196_GCM":"AES-256-GCM"===n?"AEAD_AES_256_GCM":t.SsCipher.find((function(e){return e===n}))||""}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.useConnections=void 0;var u=n(0),l=function(){function e(){this.connections=new Map,this.saveDisconnection=!1}return e.prototype.appendToSet=function(e){var t,n,a,i,u,l=e.reduce((function(e,t){return e.set(t.id,t)}),new Map);try{for(var s=o(this.connections.keys()),c=s.next();!c.done;c=s.next())if(d=c.value,!l.has(d))if(this.saveDisconnection){var f=this.connections.get(d);f&&(f.completed=!0,f.speed={upload:0,download:0})}else this.connections.delete(d)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}try{for(var d,p=o(l.keys()),h=p.next();!h.done;h=p.next())if(d=h.value,this.connections.has(d)){var v=this.connections.get(d),m=l.get(d);null===(u=this.connections)||void 0===u||u.set(d,r(r({},m),{speed:{upload:m.upload-v.upload,download:m.download-v.download}}))}else this.connections.set(d,r(r({},l.get(d)),{speed:{upload:0,download:0}}))}catch(e){a={error:e}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(a)throw a.error}}},e.prototype.toggleSave=function(){var e,t,n,r;if(this.saveDisconnection){this.saveDisconnection=!1;try{for(var a,i=o(this.connections.keys()),u=i.next();!u.done;u=i.next())a=u.value,(null===(r=null===(n=this.connections)||void 0===n?void 0:n.get(a))||void 0===r?void 0:r.completed)&&this.connections.delete(a)}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}}else this.saveDisconnection=!0;return this.saveDisconnection},e.prototype.getConnections=function(){return i(this.connections.values())},e}();t.useConnections=function(){var e=u.useMemo((function(){return new l}),[]),t=u.useRef(!0),n=a(u.useState([]),2),r=n[0],o=n[1],i=a(u.useState(!1),2),s=i[0],c=i[1];return{connections:r,feed:function(n){e.appendToSet(n),t.current&&o(e.getConnections()),t.current=!t.current},toggleSave:function(){var n=e.toggleSave();c(n),n||o(e.getConnections()),t.current=!0},save:s}}},function(e,t,n){},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!=n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0});var u=a(n(0)),l=n(10),s=n(5),c=n(6);n(212),t.default=function(){var e=(0,c.useI18n().useTranslation)("Settings").t,t=c.useAPIInfo(),n=t.data,r=t.update,o=t.fetch,a=c.useIdentity(),f=a.identity,d=a.set,p=i(l.useObject({hostname:"",port:"",secret:""}),2),h=p[0],v=p[1];return u.useEffect((function(){o()}),[]),u.useEffect((function(){v({hostname:n.hostname,port:n.port,secret:n.secret})}),[n]),u.default.createElement(s.Modal,{show:!f,title:e("externalControllerSetting.title"),bodyClassName:"external-controller",onClose:function(){return d(!0)},onOk:function(){var e=h.hostname,t=h.port,n=h.secret;r({hostname:e,port:t,secret:n})}},u.default.createElement(s.Alert,{type:"info",inside:!0},u.default.createElement("p",null,e("externalControllerSetting.note"))),u.default.createElement(s.Row,{gutter:24,align:"middle"},u.default.createElement(s.Col,{span:4,className:"title"},e("externalControllerSetting.host")),u.default.createElement(s.Col,{span:20,className:"form"},u.default.createElement(s.Input,{align:"left",inside:!0,value:h.hostname,onChange:function(e){return v("hostname",e)}}))),u.default.createElement(s.Row,{gutter:24,align:"middle"},u.default.createElement(s.Col,{span:4,className:"title"},e("externalControllerSetting.port")),u.default.createElement(s.Col,{span:20,className:"form"},u.default.createElement(s.Input,{align:"left",inside:!0,value:h.port,onChange:function(e){return v("port",e)}}))),u.default.createElement(s.Row,{gutter:24,align:"middle"},u.default.createElement(s.Col,{span:4,className:"title"},e("externalControllerSetting.secret")),u.default.createElement(s.Col,{span:20,className:"form"},u.default.createElement(s.Input,{align:"left",inside:!0,value:h.secret,onChange:function(e){return v("secret",e)}}))))}},function(e,t,n){}]);