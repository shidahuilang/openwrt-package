(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{Kv4h:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("ODXe"),a=n("q1tI"),o=n.n(a),c=o.a.useState,l=o.a.useRef,i=o.a.useCallback,s=o.a.useLayoutEffect;function u(){var e=l(null),t=c(200),n=Object(r.a)(t,2),a=n[0],o=n[1],u=i((function(){var t=e.current.getBoundingClientRect().top;o(window.innerHeight-t)}),[]);return s((function(){return u(),window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[u]),[e,a]}},OA2e:function(e,t,n){e.exports={RuleSearch:"_2QPZldYe9U",RuleSearchContainer:"_2PCUI90lIf",inputWrapper:"xOYTLnYrng",input:"_1JKQs_Qawx",iconWrapper:"_2km92h_dfH"}},RLOP:function(e,t,n){e.exports={logMeta:"_3rlaagQhmO",logType:"_1Y8l2FW3db",logTime:"_3RhnPkHfE2",logText:"o1S9cV4T0R",logsWrapper:"_3GIdCSyyS7",log:"lUDfnPiNdD",logPlaceholder:"PaFzglKCf5",logPlaceholderIcon:"_29b6nIu_GY"}},aTX5:function(e,t,n){"use strict";n.r(t);var r=n("ODXe"),a=n("iuhU"),o=n("17x9"),c=n.n(o),l=n("q1tI"),i=n.n(l),s=n("iR1w"),u=(n("pNMO"),n("TeQF"),n("QWBl"),n("27RR"),n("07d7"),n("5s+n"),n("JfAA"),n("EnZy"),n("FZtP"),n("rePB")),g=n("EJpJ");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=new TextDecoder("utf-8"),v=!1,m=!1,h="";function b(e,t){var n;try{n=JSON.parse(e)}catch(t){console.log("JSON.parse error",JSON.parse(e))}var r=new Date,a=r.toLocaleString("zh-Hans");n.time=a,n.id=r-0+Math.floor(65536*(1+Math.random())).toString(16),n.even=v=!v,t(n)}var O,y,E={};function w(e,t){if(!m&&1!==y){y=1;var n=function(e){var t=e.hostname,n=e.port,r=e.secret,a="?level="+e.logLevel;return"string"==typeof r&&""!==r&&(a+="&token="+encodeURIComponent(r)),`ws://${t}:${n}/logs${a}`}(e),r=new WebSocket(n);r.addEventListener("error",(function(e){y=3})),r.addEventListener("close",(function(n){y=3,function(e,t){if(!O||E.hostname===e.hostname&&E.port===e.port&&E.secret===e.secret&&E.logLevel===e.logLevel){if(m)return}else O.abort();m=!0,E.hostname=e.hostname,E.port=e.port,E.secret=e.secret,E.logLevel=e.logLevel;var n=(O=new AbortController).signal,r=Object(g.a)(e),a=r.url,o=r.init;fetch(a+"/logs?level="+e.logLevel,f(f({},o),{},{signal:n})).then((function(e){!function e(t,n){return t.read().then((function(r){for(var a=r.done,o=r.value,c=d.decode(o,{stream:!a}),l=(h+=c).split("\n"),i=l[l.length-1],s=0;s<l.length-1;s++)b(l[s],n);return a?(b(i,n),h="",console.log("GET /logs streaming done"),void(m=!1)):(h=i,e(t,n))}))}(e.body.getReader(),t)}),(function(e){m=!1,n.aborted||console.log("GET /logs error:",e.message)}))}(e,t)})),r.addEventListener("message",(function(e){b(e.data,t)}))}}var j=n("Kv4h"),P=n("OADI"),S=n("vJea"),L=n("+FPD"),x=n("DKqX"),N=n("RLOP"),T=n.n(N),C=n("hbEN");function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var D=Object(l.forwardRef)((function(e,t){var n=e.color,r=void 0===n?"currentColor":n,a=e.size,o=void 0===a?24:a,c=R(e,["color","size"]);return i.a.createElement("svg",k({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),i.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),i.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))}));D.propTypes={color:c.a.string,size:c.a.oneOfType([c.a.string,c.a.number])},D.displayName="Search";var _=D,I=n("OA2e"),W=n.n(I);var J=function(e){var t=e.dispatch,n=e.searchText,a=e.updateSearchText,o=Object(l.useState)(n),c=Object(r.a)(o,2),s=c[0],u=c[1],g=Object(l.useCallback)((function(e){t(a(e))}),[t,a]),p=Object(l.useMemo)((function(){return Object(C.a)(g,300)}),[g]);return i.a.createElement("div",{className:W.a.RuleSearch},i.a.createElement("div",{className:W.a.RuleSearchContainer},i.a.createElement("div",{className:W.a.inputWrapper},i.a.createElement("input",{type:"text",value:s,onChange:function(e){u(e.target.value),p(e.target.value)},className:W.a.input})),i.a.createElement("div",{className:W.a.iconWrapper},i.a.createElement(_,{size:20}))))},z=n("WfPo"),A=Object(z.a)((function(e){return{searchText:Object(L.c)(e),updateSearchText:L.e}}))(J),K=n("VVUS"),M=i.a.useCallback,Q=i.a.memo,U=i.a.useEffect,B={debug:"none",info:"#454545",warning:"#b99105",error:"#c11c1c"};function F(e){var t=e.time,n=e.even,r=e.payload,o=e.type,c=Object(a.a)({even:n},T.a.log);return i.a.createElement("div",{className:c},i.a.createElement("div",{className:T.a.logMeta},i.a.createElement("div",{className:T.a.logTime},t),i.a.createElement("div",{className:T.a.logType,style:{backgroundColor:B[o]}},o),i.a.createElement("div",{className:T.a.logText},r)))}function Y(e,t){return t[e].id}F.propTypes={time:c.a.string,even:c.a.bool,payload:c.a.string,type:c.a.string};var G=Q((function(e){var t=e.index,n=e.style,r=e.data[t];return i.a.createElement("div",{style:n},i.a.createElement(F,r))}),s.c);t.default=Object(z.a)((function(e){return{logs:Object(L.b)(e),logLevel:Object(S.c)(e),apiConfig:Object(P.c)(e)}}))((function(e){var t=e.dispatch,n=e.logLevel,a=e.apiConfig,o=e.logs,c=a.hostname,l=a.port,u=a.secret,g=M((function(e){t(Object(L.a)(e))}),[t]);U((function(){w({hostname:c,port:l,secret:u,logLevel:n},g)}),[c,l,u,n,g]);var p=Object(j.a)(),f=Object(r.a)(p,2),d=f[0],v=f[1];return i.a.createElement("div",null,i.a.createElement(x.a,{title:"Logs"}),i.a.createElement(A,null),i.a.createElement("div",{ref:d,style:{paddingBottom:30}},0===o.length?i.a.createElement("div",{className:T.a.logPlaceholder,style:{height:v-30}},i.a.createElement("div",{className:T.a.logPlaceholderIcon},i.a.createElement(K.a,{width:200,height:200})),i.a.createElement("div",null,"No logs yet, hang tight...")):i.a.createElement("div",{className:T.a.logsWrapper},i.a.createElement(s.a,{height:v-30,width:"100%",itemCount:o.length,itemSize:80,itemData:o,itemKey:Y},G))))}))}}]);