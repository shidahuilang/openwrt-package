import{c as e,H as me,i as t,A as b,F as U,b as f,d as h,at as fe,au as ne,S as B,t as A,g as z,D as xe,h as se,q as be,Y as pe,a4 as $e,k as _e,av as le,M as we,Q as ie,e as ye}from"./vendor-TCjgV7Sn.js";import{u as W,J as Ce,K as Pe,N as Se,O as Te,P as Le,Q as Ee,R as Ie,S as Ne,U as De,V as R,W as Me,X as ke,Y as Oe,Z as Ae,_ as K,$ as ge,a0 as Z,a1 as V,M as Ue,a2 as N,a3 as ve,a4 as G,B as Y,a5 as Fe,a6 as ae,a7 as ce,a8 as oe}from"./index-k-FO5KmN.js";import{f as je}from"./global-MCJ9PAgv.js";import{C as O}from"./ConfigTitle-_jKUZ02Y.js";var Be=h('<div class="flex flex-col gap-4"><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><input type=number class="input input-bordered w-full"></div><div class="flex flex-col"><input class="input input-bordered w-full"></div><div><select class="select select-bordered w-full"></select></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><div class="flex w-full justify-center"><input class=toggle type=checkbox></div></div><div><select class="select select-bordered w-full">'),Re=h('<option class="flex items-center gap-2">'),He=h("<option>");const Ye=s=>{const[n]=W();return e(Ue,{ref:r=>{var i;return(i=s.ref)==null?void 0:i.call(s,r)},get icon(){return e(me,{size:24})},get title(){return n("proxiesSettings")},get children(){var r=Be(),i=r.firstChild,o=i.firstChild,d=o.firstChild,m=i.nextSibling,y=m.firstChild,u=m.nextSibling,D=u.firstChild,x=u.nextSibling,S=x.firstChild,p=x.nextSibling,C=p.firstChild,g=p.nextSibling,T=g.firstChild,L=T.firstChild,P=g.nextSibling,M=P.firstChild,Q=M.firstChild,X=P.nextSibling,j=X.firstChild;return t(i,e(O,{withDivider:!0,get children(){return n("autoCloseConns")}}),o),d.addEventListener("change",c=>Ce(c.target.checked)),t(m,e(O,{withDivider:!0,get children(){return n("urlForLatencyTest")}}),y),y.addEventListener("change",c=>Pe(c.target.value)),t(u,e(O,{withDivider:!0,get children(){return[b(()=>n("latencyTestTimeoutDuration"))," (",b(()=>n("ms")),")"]}}),D),D.addEventListener("change",c=>Se(Number(c.target.value))),t(x,e(O,{withDivider:!0,get children(){return n("urlForIPv6SupportTest")}}),S),S.addEventListener("change",c=>{var $;return Te(($=c.target.value)==null?void 0:$.trim())}),t(p,e(O,{withDivider:!0,get children(){return n("proxiesSorting")}}),C),C.addEventListener("change",c=>Le(c.target.value)),t(C,e(U,{get each(){return Object.values(Ee)},children:c=>(()=>{var $=Re();return $.value=c,t($,()=>n(c)),$})()})),t(g,e(O,{withDivider:!0,get children(){return n("hideUnAvailableProxies")}}),T),L.addEventListener("change",c=>Ie(c.target.checked)),t(P,e(O,{withDivider:!0,get children(){return n("renderInTwoColumns")}}),M),Q.addEventListener("change",c=>Ne(c.target.checked)),t(X,e(O,{withDivider:!0,get children(){return n("proxiesPreviewType")}}),j),j.addEventListener("change",c=>De(c.target.value)),t(j,e(U,{get each(){return Object.values(R)},children:c=>(()=>{var $=He();return $.value=c,t($,()=>n(c)),$})()})),f(()=>d.checked=Me()),f(()=>y.value=ke()),f(()=>D.value=Oe()),f(()=>S.value=Ae()),f(()=>C.value=K()),f(()=>L.checked=ge()),f(()=>Q.checked=Z()),f(()=>j.value=V()),r}})},de=s=>{const n=()=>V()===R.OFF,r=b(()=>s.proxyNameList.length<=10),i=b(()=>{const d=V();return d===R.BAR||d===R.Auto&&!r()}),o=b(()=>{const d=V();return d===R.DOTS||d===R.Auto&&r()});return e(B,{get when(){return!n()},get children(){return e(fe,{get children(){return[e(ne,{get when(){return i()},get children(){return e(Xe,{get proxyNameList(){return s.proxyNameList},get now(){return s.now}})}}),e(ne,{get when(){return o()},get children(){return e(qe,{get proxyNameList(){return s.proxyNameList},get now(){return s.now}})}})]}})}})};var Qe=h('<div class="flex items-center gap-2 py-2"><div class="my-2 flex flex-1 items-center justify-center overflow-hidden rounded-2xl [&amp;>*]:h-2"><div class=bg-success></div><div class=bg-warning></div><div class=bg-error></div><div class=bg-neutral>');const Xe=s=>{const{latencyMap:n}=G(),r=b(()=>s.proxyNameList.map(u=>n()[u])),i=b(()=>r().length),o=b(()=>r().filter(u=>u>N().NOT_CONNECTED&&u<=N().MEDIUM).length),d=b(()=>r().filter(u=>u>N().MEDIUM&&u<=N().HIGH).length),m=b(()=>r().filter(u=>u>N().HIGH).length),y=b(()=>r().filter(u=>u===N().NOT_CONNECTED).length);return(()=>{var u=Qe(),D=u.firstChild,x=D.firstChild,S=x.nextSibling,p=S.nextSibling,C=p.nextSibling;return t(u,e(ve,{get name(){return s.now}}),null),f(g=>{var T=`${o()*100/i()}%`,L=`${d()*100/i()}%`,P=`${m()*100/i()}%`,M=`${y()*100/i()}%`;return T!==g.e&&((g.e=T)!=null?x.style.setProperty("width",T):x.style.removeProperty("width")),L!==g.t&&((g.t=L)!=null?S.style.setProperty("width",L):S.style.removeProperty("width")),P!==g.a&&((g.a=P)!=null?p.style.setProperty("width",P):p.style.removeProperty("width")),M!==g.o&&((g.o=M)!=null?C.style.setProperty("width",M):C.style.removeProperty("width")),g},{e:void 0,t:void 0,a:void 0,o:void 0}),u})()};var ze=h("<div>"),Ve=h('<div class="flex items-center gap-2 py-2"><div class="flex flex-1 flex-wrap items-center gap-1">');const We=s=>{let n=s.selected?"bg-white border-4 border-success":"bg-success";return typeof s.latency!="number"||s.latency===N().NOT_CONNECTED?n=s.selected?"bg-white border-4 border-neutral":"bg-neutral":s.latency>N().HIGH?n=s.selected?"bg-white border-4 border-error":"bg-error":s.latency>N().MEDIUM&&(n=s.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{var r=ze();return f(i=>{var o=A("h-4 w-4 rounded-full",n),d=s.name;return o!==i.e&&z(r,i.e=o),d!==i.t&&xe(r,"title",i.t=d),i},{e:void 0,t:void 0}),r})()},qe=s=>{const{latencyMap:n}=G();return(()=>{var r=Ve(),i=r.firstChild;return t(i,e(U,{get each(){return s.proxyNameList.map(o=>[o,n()[o]])},children:([o,d])=>{const m=s.now===o;return e(We,{name:o,latency:d,selected:m})}})),t(r,e(ve,{get name(){return s.now}}),null),r})()};var Je=h("<progress class=progress max=100>"),Ke=h('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),Ze=h('<div class="text-sm text-slate-500">: ');const Ge=s=>{const{Download:n=0,Upload:r=0,Total:i=0,Expire:o=0}=s,d=se(i,{units:"iec"}),m=se(n+r,{units:"iec"}),y=be.toFinite(((n+r)/i*100).toFixed(2));return{total:d,used:m,percentage:y,expirePrefix:()=>{const[x]=W();return x("expire")},expireStr:()=>{const[x]=W();return o===0?x("noExpire"):pe(o*1e3).format("YYYY-MM-DD")}}},et=s=>{if(!s.subscriptionInfo)return;const n=Ge(s.subscriptionInfo);return[(()=>{var r=Je();return f(()=>r.value=n.percentage),r})(),(()=>{var r=Ke(),i=r.firstChild,o=i.nextSibling,d=o.nextSibling,m=d.nextSibling;return m.nextSibling,t(r,()=>`${n.used}`,i),t(r,()=>`${n.total}`,o),t(r,()=>n.percentage,m),r})(),(()=>{var r=Ze(),i=r.firstChild;return t(r,()=>n.expirePrefix(),i),t(r,()=>n.expireStr(),null),r})()]};var ue=h("<div>"),tt=h('<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-boxed tabs gap-2"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">'),rt=h('<button><span></span><div class="badge badge-sm">'),nt=h('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm">'),st=h('<div class="text-sm text-slate-500"> '),lt=h('<div class="flex items-center justify-between pr-8"><div class="flex items-center gap-2"><span></span><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">'),it=h('<div class="text-sm text-slate-500"> :: <!> ');const ut=()=>{let s;const[n]=W(),{fetchProxies:r,proxies:i,selectProxyInGroup:o,latencyMap:d,proxyGroupNames:m,proxyProviders:y,updateProviderByProviderName:u,updateAllProvider:D,proxyGroupLatencyTest:x,proxyProviderLatencyTest:S,collapsedMap:p,setCollapsedMap:C,proxyGroupLatencyTestingMap:g,proxyProviderLatencyTestingMap:T,isAllProviderUpdating:L,updatingMap:P}=G();$e(r);const M=async(_,E)=>{_.stopPropagation(),x(E)},Q=(_,E)=>{_.stopPropagation(),S(E)},X=(_,E)=>{_.stopPropagation(),u(E)},j=async _=>{_.stopPropagation(),D()},[c,$]=_e("proxies"),he=()=>[{type:"proxies",name:n("proxies"),count:i().length},{type:"proxyProviders",name:n("proxyProviders"),count:y().length}];return(()=>{var _=tt(),E=_.firstChild,ee=E.firstChild,te=ee.nextSibling,re=E.nextSibling;return t(ee,e(U,{get each(){return he()},children:v=>(()=>{var l=rt(),k=l.firstChild,H=k.nextSibling;return l.$$click=()=>$(v.type),t(k,()=>v.name),t(H,()=>v.count),f(()=>z(l,A(c()===v.type&&"tab-active","tab tab-sm gap-2 px-2 sm:tab-md"))),l})()})),t(E,e(B,{get when(){return c()==="proxyProviders"},get children(){return e(Y,{class:"btn btn-circle btn-sm",get disabled(){return L()},onClick:v=>j(v),get icon(){return e(le,{get class(){return A(L()&&"animate-spin text-success")}})}})}}),te),t(te,e(Y,{class:"btn-circle btn-sm sm:btn-md",onClick:()=>s==null?void 0:s.showModal(),get icon(){return e(we,{})}})),t(re,e(B,{get when(){return c()==="proxies"},get children(){var v=ue();return t(v,e(U,{get each(){return i()},children:l=>{const k=b(()=>Fe(ae(l.all??[],d(),K(),m()),d(),m(),ge())),H=[(()=>{var a=nt(),I=a.firstChild,w=I.firstChild,q=w.nextSibling;return t(w,()=>l.name),t(q,()=>{var F;return(F=l.all)==null?void 0:F.length}),t(a,e(Y,{class:"btn-circle btn-sm",get disabled(){return g()[l.name]},onClick:F=>M(F,l.name),get icon(){return e(ie,{get class(){return A(g()[l.name]&&"animate-pulse text-success")}})}}),null),a})(),(()=>{var a=st(),I=a.firstChild;return t(a,()=>l.type,I),t(a,()=>{var w;return((w=l.now)==null?void 0:w.length)>0&&` :: ${l.now}`},null),a})(),e(B,{get when(){return!p()[l.name]},get children(){return e(de,{get proxyNameList(){return k()},get now(){return l.now}})}})];return e(ce,{get isOpen(){return p()[l.name]},title:H,onCollapse:a=>C(l.name,a),get children(){return e(U,{get each(){return k()},children:a=>e(oe,{proxyName:a,get isSelected(){return l.now===a},onClick:()=>void o(l,a)})})}})}})),f(()=>z(v,A("grid grid-cols-1 place-items-start gap-2",Z()?"sm:grid-cols-2":"sm:grid-cols-1"))),v}}),null),t(re,e(B,{get when(){return c()==="proxyProviders"},get children(){var v=ue();return t(v,e(U,{get each(){return y()},children:l=>{const k=b(()=>ae(l.proxies.map(a=>a.name)??[],d(),K(),void 0)),H=[(()=>{var a=lt(),I=a.firstChild,w=I.firstChild,q=w.nextSibling,F=I.nextSibling;return t(w,()=>l.name),t(q,()=>l.proxies.length),t(F,e(Y,{class:"btn btn-circle btn-sm",get disabled(){return P()[l.name]},onClick:J=>X(J,l.name),get icon(){return e(le,{get class(){return A(P()[l.name]&&"animate-spin text-success")}})}}),null),t(F,e(Y,{class:"btn btn-circle btn-sm",get disabled(){return T()[l.name]},onClick:J=>Q(J,l.name),get icon(){return e(ie,{get class(){return A(T()[l.name]&&"animate-pulse text-success")}})}}),null),a})(),e(et,{get subscriptionInfo(){return l.subscriptionInfo}}),(()=>{var a=it(),I=a.firstChild,w=I.nextSibling;return w.nextSibling,t(a,()=>l.vehicleType,I),t(a,()=>n("updated"),w),t(a,()=>je(l.updatedAt),null),a})(),e(B,{get when(){return!p()[l.name]},get children(){return e(de,{get proxyNameList(){return k()}})}})];return e(ce,{get isOpen(){return p()[l.name]},title:H,onCollapse:a=>C(l.name,a),get children(){return e(U,{get each(){return k()},children:a=>e(oe,{proxyName:a})})}})}})),f(()=>z(v,A("grid grid-cols-1 place-items-start gap-2",Z()?"sm:grid-cols-2":"sm:grid-cols-1"))),v}}),null),t(_,e(Ye,{ref:v=>s=v}),null),_})()};ye(["click"]);export{ut as default};
